
 RUN  v3.2.4 /Users/chuck/workspace/ariadne

 ❯ packages/core/src/index_single_file/semantic_index.rust.test.ts (25 tests | 14 failed) 1727ms
   ✓ Semantic Index - Rust > Structs and enums > should extract struct definitions 141ms
   ✓ Semantic Index - Rust > Structs and enums > should extract enum definitions 68ms
   × Semantic Index - Rust > Structs and enums > should extract enum variants 72ms
     → Cannot read properties of undefined (reading 'values')
   × Semantic Index - Rust > Structs and enums > should extract struct fields 62ms
     → Cannot read properties of undefined (reading 'values')
   × Semantic Index - Rust > Traits > should extract trait definitions 78ms
     → expected [ 'Drawable', 'Iterator', …(3) ] to include 'Printable'
   × Semantic Index - Rust > Traits > should extract trait methods 61ms
     → Cannot read properties of undefined (reading 'values')
   × Semantic Index - Rust > Impl blocks > should extract methods from impl blocks 66ms
     → Cannot read properties of undefined (reading 'values')
   × Semantic Index - Rust > Impl blocks > should distinguish associated functions from methods 62ms
     → Cannot read properties of undefined (reading 'values')
   × Semantic Index - Rust > Impl blocks > should extract trait implementations 60ms
     → Cannot read properties of undefined (reading 'values')
   × Semantic Index - Rust > Functions > should extract function definitions 99ms
     → expected [ 'add', 'first_word', …(42) ] to include 'main'
   × Semantic Index - Rust > Functions > should extract function parameters 60ms
     → Cannot read properties of undefined (reading 'values')
   ✓ Semantic Index - Rust > Functions > should extract function return types 60ms
   ✓ Semantic Index - Rust > Ownership patterns > should handle reference types in function signatures 59ms
   ✓ Semantic Index - Rust > Ownership patterns > should handle basic borrowing patterns 74ms
   ✓ Semantic Index - Rust > Modules and visibility > should extract module declarations 66ms
   × Semantic Index - Rust > Modules and visibility > should handle use statements 59ms
     → expected 0 to be greater than 0
   ✓ Semantic Index - Rust > Type metadata extraction > should extract type info from function parameter type annotations 60ms
   ✓ Semantic Index - Rust > Type metadata extraction > should extract type info from variable annotations 60ms
   ✓ Semantic Index - Rust > Type metadata extraction > should handle generic types 59ms
   × Semantic Index - Rust > Method calls and type resolution > should track method calls with receivers 61ms
     → expected undefined to be defined
   × Semantic Index - Rust > Method calls and type resolution > should handle chained method calls 62ms
     → expected [ …(3) ] to include 'to_uppercase'
   × Semantic Index - Rust > Method calls and type resolution > should capture field access chains 61ms
     → expected 0 to be greater than 0
   ✓ Semantic Index - Rust > Method calls and type resolution > should capture struct instantiation 60ms
   × Semantic Index - Rust > Comprehensive integration > should handle comprehensive definition file 82ms
     → Cannot read properties of undefined (reading 'size')
   ✓ Semantic Index - Rust > Comprehensive integration > should integrate Rust extractors into semantic index pipeline 62ms

⎯⎯⎯⎯⎯⎯ Failed Tests 14 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  packages/core/src/index_single_file/semantic_index.rust.test.ts > Semantic Index - Rust > Structs and enums > should extract enum variants
TypeError: Cannot read properties of undefined (reading 'values')
 ❯ packages/core/src/index_single_file/semantic_index.rust.test.ts:101:59
     99| 
    100|       // Verify enum members are captured
    101|       const variant_names = Array.from(index.enum_members.values()).ma…
       |                                                           ^
    102|       expect(variant_names).toContain("North");
    103|       expect(variant_names).toContain("South");

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/14]⎯

 FAIL  packages/core/src/index_single_file/semantic_index.rust.test.ts > Semantic Index - Rust > Structs and enums > should extract struct fields
TypeError: Cannot read properties of undefined (reading 'values')
 ❯ packages/core/src/index_single_file/semantic_index.rust.test.ts:128:58
    126| 
    127|       // Verify properties are captured
    128|       const property_names = Array.from(index.properties.values()).map…
       |                                                          ^
    129|       expect(property_names).toContain("x");
    130|       expect(property_names).toContain("y");

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/14]⎯

 FAIL  packages/core/src/index_single_file/semantic_index.rust.test.ts > Semantic Index - Rust > Traits > should extract trait definitions
AssertionError: expected [ 'Drawable', 'Iterator', …(3) ] to include 'Printable'
 ❯ packages/core/src/index_single_file/semantic_index.rust.test.ts:156:31
    154|       const interface_names = Array.from(index.interfaces.values()).ma…
    155|       expect(interface_names).toContain("Drawable");
    156|       expect(interface_names).toContain("Printable");
       |                               ^
    157|     });
    158| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/14]⎯

 FAIL  packages/core/src/index_single_file/semantic_index.rust.test.ts > Semantic Index - Rust > Traits > should extract trait methods
TypeError: Cannot read properties of undefined (reading 'values')
 ❯ packages/core/src/index_single_file/semantic_index.rust.test.ts:175:53
    173| 
    174|       // Verify trait methods are captured
    175|       const method_names = Array.from(index.methods.values()).map(m =>…
       |                                                     ^
    176|       expect(method_names).toContain("fmt");
    177|       expect(method_names).toContain("print");

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/14]⎯

 FAIL  packages/core/src/index_single_file/semantic_index.rust.test.ts > Semantic Index - Rust > Impl blocks > should extract methods from impl blocks
TypeError: Cannot read properties of undefined (reading 'values')
 ❯ packages/core/src/index_single_file/semantic_index.rust.test.ts:198:53
    196| 
    197|       // Verify methods are captured
    198|       const method_names = Array.from(index.methods.values()).map(m =>…
       |                                                     ^
    199|       expect(method_names).toContain("new");
    200|       expect(method_names).toContain("distance");

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/14]⎯

 FAIL  packages/core/src/index_single_file/semantic_index.rust.test.ts > Semantic Index - Rust > Impl blocks > should distinguish associated functions from methods
TypeError: Cannot read properties of undefined (reading 'values')
 ❯ packages/core/src/index_single_file/semantic_index.rust.test.ts:227:53
    225| 
    226|       // Both are captured as methods
    227|       const method_names = Array.from(index.methods.values()).map(m =>…
       |                                                     ^
    228|       expect(method_names).toContain("new");
    229|       expect(method_names).toContain("add");

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/14]⎯

 FAIL  packages/core/src/index_single_file/semantic_index.rust.test.ts > Semantic Index - Rust > Impl blocks > should extract trait implementations
TypeError: Cannot read properties of undefined (reading 'values')
 ❯ packages/core/src/index_single_file/semantic_index.rust.test.ts:259:53
    257|       expect(interface_names).toContain("Display");
    258| 
    259|       const method_names = Array.from(index.methods.values()).map(m =>…
       |                                                     ^
    260|       expect(method_names).toContain("fmt");
    261|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/14]⎯

 FAIL  packages/core/src/index_single_file/semantic_index.rust.test.ts > Semantic Index - Rust > Functions > should extract function definitions
AssertionError: expected [ 'add', 'first_word', …(42) ] to include 'main'
 ❯ packages/core/src/index_single_file/semantic_index.rust.test.ts:283:30
    281|       const function_names = Array.from(index.functions.values()).map(…
    282|       expect(function_names).toContain("add");
    283|       expect(function_names).toContain("main");
       |                              ^
    284|     });
    285| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/14]⎯

 FAIL  packages/core/src/index_single_file/semantic_index.rust.test.ts > Semantic Index - Rust > Functions > should extract function parameters
TypeError: Cannot read properties of undefined (reading 'values')
 ❯ packages/core/src/index_single_file/semantic_index.rust.test.ts:303:55
    301| 
    302|       // Verify parameters are captured
    303|       const param_names = Array.from(index.parameters.values()).map(p …
       |                                                       ^
    304|       expect(param_names).toContain("name");
    305|       expect(param_names).toContain("age");

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/14]⎯

 FAIL  packages/core/src/index_single_file/semantic_index.rust.test.ts > Semantic Index - Rust > Modules and visibility > should handle use statements
AssertionError: expected 0 to be greater than 0
 ❯ packages/core/src/index_single_file/semantic_index.rust.test.ts:405:43
    403| 
    404|       // Verify imports are captured
    405|       expect(index.imported_symbols.size).toBeGreaterThan(0);
       |                                           ^
    406|     });
    407|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/14]⎯

 FAIL  packages/core/src/index_single_file/semantic_index.rust.test.ts > Semantic Index - Rust > Method calls and type resolution > should track method calls with receivers
AssertionError: expected undefined to be defined
 ❯ packages/core/src/index_single_file/semantic_index.rust.test.ts:530:29
    528|       // Verify receiver_location is populated
    529|       const distance_call = method_calls.find(c => c.name === "distanc…
    530|       expect(distance_call).toBeDefined();
       |                             ^
    531|       expect(distance_call?.context?.receiver_location).toBeDefined();
    532|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/14]⎯

 FAIL  packages/core/src/index_single_file/semantic_index.rust.test.ts > Semantic Index - Rust > Method calls and type resolution > should handle chained method calls
AssertionError: expected [ …(3) ] to include 'to_uppercase'
 ❯ packages/core/src/index_single_file/semantic_index.rust.test.ts:557:28
    555|       // Verify specific method calls
    556|       const method_names = method_calls.map(c => c.name);
    557|       expect(method_names).toContain("to_uppercase");
       |                            ^
    558|       expect(method_names).toContain("trim");
    559|       expect(method_names).toContain("to_string");

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/14]⎯

 FAIL  packages/core/src/index_single_file/semantic_index.rust.test.ts > Semantic Index - Rust > Method calls and type resolution > should capture field access chains
AssertionError: expected 0 to be greater than 0
 ❯ packages/core/src/index_single_file/semantic_index.rust.test.ts:587:37
    585|       // Verify field accesses are captured
    586|       const field_accesses = index.references.filter(r => r.type === "…
    587|       expect(field_accesses.length).toBeGreaterThan(0);
       |                                     ^
    588|     });
    589| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/14]⎯

 FAIL  packages/core/src/index_single_file/semantic_index.rust.test.ts > Semantic Index - Rust > Comprehensive integration > should handle comprehensive definition file
TypeError: Cannot read properties of undefined (reading 'size')
 ❯ packages/core/src/index_single_file/semantic_index.rust.test.ts:644:28
    642|       expect(index.classes.size).toBeGreaterThan(0);
    643|       expect(index.enums.size).toBeGreaterThan(0);
    644|       expect(index.methods.size).toBeGreaterThan(0);
       |                            ^
    645|     });
    646| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/14]⎯


 Test Files  1 failed (1)
      Tests  14 failed | 11 passed (25)
   Start at  14:20:56
   Duration  2.35s (transform 206ms, setup 0ms, collect 286ms, tests 1.73s, environment 0ms, prepare 64ms)

